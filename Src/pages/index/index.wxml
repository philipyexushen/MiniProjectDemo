<import src="../common/head.wxml" />
<import src="../common/dialog.wxml" />

<view class="page">
  <image class='background-image' style="width: {{backgroundImageWidth}}px; height: {{backgroundImageHeight}}px;position:fixed;" src="{{backgroundSrc}}" bindload="imageLoad"></image>
  <image class='help_image' src='{{helpImageSrc}}' bindtap='openHelpPage'></image>
  <view class="swiper-tab">
    <block wx:for="{{tabName}}" wx:key="*this" wx:for-index="index">
      <view id="mainPageTab{{index}}" class="swiper-tab-item {{currentTabIndex==index?'swiper-tab-item-active':''}}" data-current="{{index}}" bindtap="clickTab">
      <image style='justify-content:center; position: relative;height: 10px; width: 10px;' src="{{currentTabIndex==index ? tinyCircleImageSrc : ''}}"></image>
      {{item}}
      </view>
    </block>
  </view>
  <view class="page-body">
    <view class="swiper-page-section">
      <swiper next-margin='35px'
        autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}"
        style="height:286px;" bindchange='onQuestionCatalogChange'
        current='{{currentCatalogIndex}}'>
        <block wx:for="{{tabContent[currentTabIndex]}}" wx:key="*this" wx:for-index="index">
          <swiper-item>
            <view class="swiper-item">
              <image class='swiper-item-background' src='{{swiperBackgroundSrc}}' mode="cover"></image>
              <view class='swiper-item-top'>
                <text class='swiper-item-top-title'>{{tabName[currentTabIndex]}}挑战赛</text>
                <image class='watch-ranking-list-image' src='{{watchRankingListImageSrc}}' mode="cover" bindtap='openRankList'></image>
              </view>
              <view class='swiper-item-middle'>
                <image src='{{tabContent[currentTabIndex][index].qs_logo}}' class='swiper-logo' mode='widthFix'></image>
                <text class='swiper-catalog-title'>{{tabContent[currentTabIndex][index].qs_tilte}}挑战赛</text>
                <view class='swiper-catalog-sub-title-1'>
                  <text class='swiper-catalog-sub-title-hightlight'>{{tabContent[currentTabIndex][index].answering_number*43432}}</text>
                  <text>人正在挑战</text>
                </view>
                <view class='swiper-catalog-sub-title-2'>
                  <text>仅剩</text>
                  <text class='swiper-catalog-sub-title-hightlight'>{{tabContent[currentTabIndex][index].free_prizes_left}}</text>
                  <text>个免单名额</text>
                </view>
               <image class='challenge_image' src='{{challangeImageSrc}}' mode="cover" bindtap='openQuesionPage'></image>
                
              </view>
              <view class='award-view'>
                  <block wx:for="{{goods[index]}}" wx:key="*this" wx:for-index="goodsIndex">
                    <view style='height:60rpx;width:60rpx;margin-left:6rpx;margin-right:6rpx;'>
                      <image src='{{goods[index][goodsIndex].g_pic}}' style='height:60rpx;width:60rpx;	'></image>
                    </view>
                  </block>
                </view>
            </view>
          </swiper-item>  
        </block>
      </swiper>
    </view>
  </view>
  <view class="userinfo">
    <open-data type="userAvatarUrl" class='userinfo-avatar'></open-data>
    <open-data type="userNickName" class='userinfo-nickname'></open-data>
  </view>
  <image class='my-gifts-image' src='{{myGiftsImageSrc}}' bindtap='onGiftsImageClick'></image>
</view>
<template is="giftsDialogView" data="{{showGiftsPage:showGiftsPage, isDownloadingGiftsPage:isDownloadingGiftsPage, gifts_rolls:gifts_rolls, emptyRollsPageSrc:emptyRollsPageSrc}}" />
